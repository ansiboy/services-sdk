{"version":3,"sources":["../../out/services/permission-service.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","service_1","require","errors_1","PermissionService","arguments","role","RoleModule","user","UserModule","sms","SMSModule","resource","list","args","url","getByJson","item","id","remove","post","add","postByJson","update","token","r","path","baseUrl","errors","serviceUrlCanntNull","endsWith","userId","argumentNull","deleteByJson","unexpectedNullResult","userIds","Service","ServiceModule","service","bind","get","mobile","filter","dataItems","password","smsId","verifyCode","arg0","username","data","ids","roleId","arg1","arg2","name","remark","resourceIds","type"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;AACA,IAAIA,SAAS,GAAI,UAAQ,SAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BC,CAA/B,EAAkCC,SAAlC,EAA6C;AACrF,WAASC,KAAT,CAAeC,KAAf,EAAsB;AAAE,WAAOA,KAAK,YAAYH,CAAjB,GAAqBG,KAArB,GAA6B,IAAIH,CAAJ,CAAM,UAAUI,OAAV,EAAmB;AAAEA,MAAAA,OAAO,CAACD,KAAD,CAAP;AAAiB,KAA5C,CAApC;AAAoF;;AAC5G,SAAO,KAAKH,CAAC,KAAKA,CAAC,GAAGK,OAAT,CAAN,EAAyB,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACvD,aAASC,SAAT,CAAmBJ,KAAnB,EAA0B;AAAE,UAAI;AAAEK,QAAAA,IAAI,CAACP,SAAS,CAACQ,IAAV,CAAeN,KAAf,CAAD,CAAJ;AAA8B,OAApC,CAAqC,OAAOO,CAAP,EAAU;AAAEJ,QAAAA,MAAM,CAACI,CAAD,CAAN;AAAY;AAAE;;AAC3F,aAASC,QAAT,CAAkBR,KAAlB,EAAyB;AAAE,UAAI;AAAEK,QAAAA,IAAI,CAACP,SAAS,CAAC,OAAD,CAAT,CAAmBE,KAAnB,CAAD,CAAJ;AAAkC,OAAxC,CAAyC,OAAOO,CAAP,EAAU;AAAEJ,QAAAA,MAAM,CAACI,CAAD,CAAN;AAAY;AAAE;;AAC9F,aAASF,IAAT,CAAcI,MAAd,EAAsB;AAAEA,MAAAA,MAAM,CAACC,IAAP,GAAcT,OAAO,CAACQ,MAAM,CAACT,KAAR,CAArB,GAAsCD,KAAK,CAACU,MAAM,CAACT,KAAR,CAAL,CAAoBW,IAApB,CAAyBP,SAAzB,EAAoCI,QAApC,CAAtC;AAAsF;;AAC9GH,IAAAA,IAAI,CAAC,CAACP,SAAS,GAAGA,SAAS,CAACc,KAAV,CAAgBjB,OAAhB,EAAyBC,UAAU,IAAI,EAAvC,CAAb,EAAyDU,IAAzD,EAAD,CAAJ;AACH,GALM,CAAP;AAMH,CARD;;AASAO,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEf,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAMgB,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,IAAMC,QAAQ,GAAGD,OAAO,CAAC,WAAD,CAAxB,C,CACA;;;IACME,iB;;;;;AACF,+BAAc;AAAA;;AAAA;;AACV,4FAASC,SAAT;AACA,UAAKC,IAAL,GAAY,IAAIC,UAAJ,+BAAZ;AACA,UAAKC,IAAL,GAAY,IAAIC,UAAJ,+BAAZ;AACA,UAAKC,GAAL,GAAW,IAAIC,SAAJ,+BAAX;AACA,UAAKC,QAAL,GAAgB;AACZC,MAAAA,IAAI,EAAE,cAACC,IAAD,EAAU;AACZ,YAAIC,GAAG,GAAG,MAAKA,GAAL,CAAS,eAAT,CAAV;;AACA,eAAO,MAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAED,UAAAA,IAAI,EAAJA;AAAF,SAApB,CAAP;AACH,OAJW;AAKZG,MAAAA,IAAI,EAAE,cAACC,EAAD,EAAQ;AACV,YAAIH,GAAG,GAAG,MAAKA,GAAL,CAAS,eAAT,CAAV;;AACA,eAAO,MAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAEG,UAAAA,EAAE,EAAFA;AAAF,SAApB,CAAP;AACH,OARW;AASZC,MAAAA,MAAM,EAAE,gBAACD,EAAD,EAAQ;AACZ,YAAIH,GAAG,GAAG,MAAKA,GAAL,CAAS,iBAAT,CAAV;;AACA,eAAO,MAAKK,IAAL,CAAUL,GAAV,EAAe;AAAEG,UAAAA,EAAE,EAAFA;AAAF,SAAf,CAAP;AACH,OAZW;AAaZG,MAAAA,GAAG,EAAE,aAACJ,IAAD,EAAU;AACX,YAAIF,GAAG,GAAG,MAAKA,GAAL,CAAS,cAAT,CAAV;;AACA,eAAO,MAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAEE,UAAAA,IAAI,EAAJA;AAAF,SAArB,CAAP;AACH,OAhBW;AAiBZM,MAAAA,MAAM,EAAE,gBAACN,IAAD,EAAU;AACd,YAAIF,GAAG,GAAG,MAAKA,GAAL,CAAS,iBAAT,CAAV;;AACA,eAAO,MAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAEE,UAAAA,IAAI,EAAJA;AAAF,SAArB,CAAP;AACH;AApBW,KAAhB;AAsBA,UAAKO,KAAL,GAAa;AACTX,MAAAA,IAAI,EAAE,cAACC,IAAD;AAAA,eAAUnC,SAAS,gCAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,gCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AACxCoC,kBAAAA,GADwC,GAClC,KAAKA,GAAL,CAAS,YAAT,CADkC;AAExCU,kBAAAA,CAFwC,GAEpC,KAAKT,SAAL,CAAeD,GAAf,EAAoB;AAAED,oBAAAA,IAAI,EAAJA;AAAF,mBAApB,CAFoC;AAAA,mDAGrCW,CAHqC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAvB,EAAnB;AAAA,OADG;AAMTJ,MAAAA,GAAG,EAAE,aAACJ,IAAD;AAAA,eAAUtC,SAAS,gCAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,gCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AACvCoC,kBAAAA,GADuC,GACjC,KAAKA,GAAL,CAAS,WAAT,CADiC;AAAA;AAEnC,yBAAM,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAEE,oBAAAA,IAAI,EAAJA;AAAF,mBAArB,CAAN;;AAFmC;AAEvCQ,kBAAAA,CAFuC;AAAA,oDAGpCA,CAHoC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAvB,EAAnB;AAAA;AANI,KAAb;AA3BU;AAuCb;;;;wBACGC,I,EAAM;AACN,UAAI,CAACtB,iBAAiB,CAACuB,OAAvB,EACI,MAAMxB,QAAQ,CAACyB,MAAT,CAAgBC,mBAAhB,CAAoC,mBAApC,CAAN;AACJ,UAAIzB,iBAAiB,CAACuB,OAAlB,CAA0BG,QAA1B,CAAmC,GAAnC,CAAJ,EACI,iBAAU1B,iBAAiB,CAACuB,OAA5B,SAAsCD,IAAtC;AACJ,uBAAUtB,iBAAiB,CAACuB,OAA5B,cAAuCD,IAAvC;AACH;AACD;;;;;;;+BAIWK,M,EAAQ;AACf,aAAOpD,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAC9BoD,MAD8B;AAAA;AAAA;AAAA;;AAAA,sBAEzB5B,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,QAA7B,CAFyB;;AAAA;AAG/BjB,gBAAAA,GAH+B,GAGzB,KAAKA,GAAL,CAAS,wBAAT,CAHyB;AAAA,kDAI5B,KAAKkB,YAAL,CAAkBlB,GAAlB,EAAuB;AAAEgB,kBAAAA,MAAM,EAANA;AAAF,iBAAvB,CAJ4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAMH;AACD;;;;;;;uCAImBjB,I,EAAM;AACrB,aAAOnC,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAC/BmC,IAAI,IAAI,IADuB;AAAA;AAAA;AAAA;;AAAA,sBAEzBX,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,MAA7B,CAFyB;;AAAA;AAG/BjB,gBAAAA,GAH+B,GAGzB,KAAKA,GAAL,CAAS,mBAAT,CAHyB;AAAA;AAItB,uBAAM,KAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAED,kBAAAA,IAAI,EAAJA;AAAF,iBAApB,CAAN;;AAJsB;AAI/BpB,gBAAAA,MAJ+B;;AAAA,sBAK/BA,MAAM,IAAI,IALqB;AAAA;AAAA;AAAA;;AAAA,sBAMzBS,QAAQ,CAACyB,MAAT,CAAgBM,oBAAhB,EANyB;;AAAA;AAAA,kDAO5BxC,MAP4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AASH;AACD;;;;;;;iCAIaqC,M,EAAQ;AACjB,aAAOpD,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BoC,gBAAAA,GAD+B,GACzB,KAAKA,GAAL,CAAS,gBAAT,CADyB;AAAA;AAE3B,uBAAM,KAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAEoB,kBAAAA,OAAO,EAAE,CAACJ,MAAD;AAAX,iBAApB,CAAN;;AAF2B;AAE/BN,gBAAAA,CAF+B;AAAA,kDAG5BA,CAAC,CAACM,MAAD,CAH2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAKH;;;;EArF2B9B,SAAS,CAACmC,O;;AAuF1CpC,OAAO,CAACI,iBAAR,GAA4BA,iBAA5B;;IACMiC,a;;;AACF,yBAAYC,OAAZ,EAAqB;AAAA;;AACjB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKtB,SAAL,GAAiB,KAAKsB,OAAL,CAAatB,SAAb,CAAuBuB,IAAvB,CAA4B,KAAKD,OAAjC,CAAjB;AACA,SAAKhB,UAAL,GAAkB,KAAKgB,OAAL,CAAahB,UAAb,CAAwBiB,IAAxB,CAA6B,KAAKD,OAAlC,CAAlB;AACA,SAAKE,GAAL,GAAW,KAAKF,OAAL,CAAaE,GAAb,CAAiBD,IAAjB,CAAsB,KAAKD,OAA3B,CAAX;AACA,SAAKlB,IAAL,GAAY,KAAKkB,OAAL,CAAalB,IAAb,CAAkBmB,IAAlB,CAAuB,KAAKD,OAA5B,CAAZ;AACH;;;;wBACGZ,I,EAAM;AACN,UAAI,CAACtB,iBAAiB,CAACuB,OAAvB,EACI,MAAMxB,QAAQ,CAACyB,MAAT,CAAgBC,mBAAhB,CAAoC,mBAApC,CAAN;AACJ,uBAAUzB,iBAAiB,CAACuB,OAA5B,cAAuCD,IAAvC;AACH;;;;;;IAECjB,U;;;;;AACF,wBAAc;AAAA;;AAAA;;AACV,sFAASJ,SAAT;AACA,WAAKC,IAAL,GAAY;AACRO,MAAAA,IAAI,EAAE,cAACkB,MAAD;AAAA,eAAYpD,SAAS,iCAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,gCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1CoC,kBAAAA,GAD0C,GACpC,KAAKA,GAAL,CAAS,gBAAT,CADoC;AAAA;AAEtC,yBAAM,KAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAEgB,oBAAAA,MAAM,EAANA;AAAF,mBAApB,CAAN;;AAFsC;AAE1CN,kBAAAA,CAF0C;AAAA,oDAGvCA,CAHuC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAvB,EAArB;AAAA;AADE,KAAZ;AAOA,WAAKb,QAAL,GAAgB;AACZC,MAAAA,IAAI,EAAE,cAACkB,MAAD;AAAA,eAAYpD,SAAS,iCAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,gCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1CoC,kBAAAA,GAD0C,GACpC,KAAKA,GAAL,CAAS,oBAAT,CADoC;AAAA;AAEtC,yBAAM,KAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAEgB,oBAAAA,MAAM,EAANA;AAAF,mBAApB,CAAN;;AAFsC;AAE1CN,kBAAAA,CAF0C;AAAA,oDAGvCA,CAHuC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAvB,EAArB;AAAA;AADM,KAAhB;AATU;AAgBb;AACD;;;;;yBACKX,I,EAAM;AACP,aAAOnC,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BoC,gBAAAA,GAD+B,GACzB,KAAKA,GAAL,CAAS,WAAT,CADyB;AAAA;AAEtB,uBAAM,KAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAED,kBAAAA,IAAI,EAAJA;AAAF,iBAApB,CAAN;;AAFsB;AAE/BpB,gBAAAA,MAF+B;;AAAA,sBAG/BA,MAAM,IAAI,IAHqB;AAAA;AAAA;AAAA;;AAAA,sBAIzBS,QAAQ,CAACyB,MAAT,CAAgBM,oBAAhB,EAJyB;;AAAA;AAAA,kDAK5BxC,MAL4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAOH;AACD;;;;;;;2BAIOuB,I,EAAM;AACT,aAAOtC,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BoC,gBAAAA,GAD+B,GACzB,KAAKA,GAAL,CAAS,aAAT,CADyB;AAAA;AAEtB,uBAAM,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAEP,kBAAAA,IAAI,EAAES;AAAR,iBAArB,CAAN;;AAFsB;AAE/BvB,gBAAAA,MAF+B;AAAA,kDAG5BA,MAH4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAKH;AACD;;;;;;;yBAIKqC,M,EAAQ;AACT,aAAOpD,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BoC,gBAAAA,GAD+B,GACzB,KAAKA,GAAL,CAAS,WAAT,CADyB;AAAA;AAExB,uBAAM,KAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAEgB,kBAAAA,MAAM,EAANA;AAAF,iBAApB,CAAN;;AAFwB;AAE/BvB,gBAAAA,IAF+B;AAAA,mDAG5BA,IAH4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAKH;AACD;;;;;;;wBAIIS,I,EAAM;AACN,aAAOtC,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BoC,gBAAAA,GAD+B,GACzB,KAAKA,GAAL,CAAS,UAAT,CADyB;AAAA;AAG3B,uBAAM,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAEE,kBAAAA,IAAI,EAAJA;AAAF,iBAArB,CAAN;;AAH2B;AAG/BQ,gBAAAA,CAH+B;AAAA,mDAI5BA,CAJ4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAMH;AACD;;;;iCACagB,M,EAAQ;AACjB,aAAO9D,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAC9B8D,MAD8B;AAAA;AAAA;AAAA;;AAAA,sBAEzBtC,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,QAA7B,CAFyB;;AAAA;AAG/BlB,gBAAAA,IAH+B,GAGxB,EAHwB;AAInCA,gBAAAA,IAAI,CAAC4B,MAAL,uBAA2BD,MAA3B;AAJmC;AAK3B,uBAAM,KAAK5B,IAAL,CAAUC,IAAV,CAAN;;AAL2B;AAK/BW,gBAAAA,CAL+B;AAAA,mDAM5BA,CAAC,CAACkB,SAAF,CAAY,CAAZ,CAN4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAQH;AACD;;;;;;;;;;kCAOcF,M,EAAQG,Q,EAAUC,K,EAAOC,U,EAAY;AAC/C,UAAI,CAACL,MAAL,EACI,MAAMtC,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,QAA7B,CAAN;AACJ,UAAI,CAACY,QAAL,EACI,MAAMzC,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,UAA7B,CAAN;AACJ,UAAI,CAACa,KAAL,EACI,MAAM1C,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,OAA7B,CAAN;AACJ,UAAI,CAACc,UAAL,EACI,MAAM3C,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,YAA7B,CAAN;AACJ,UAAIjB,GAAG,GAAG,KAAKA,GAAL,CAAS,oBAAT,CAAV;AACA,aAAO,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAE0B,QAAAA,MAAM,EAANA,MAAF;AAAUG,QAAAA,QAAQ,EAARA,QAAV;AAAoBC,QAAAA,KAAK,EAALA,KAApB;AAA2BC,QAAAA,UAAU,EAAVA;AAA3B,OAArB,CAAP;AACH;AACD;;;;;;;;;gCAMYL,M,EAAQI,K,EAAOC,U,EAAY;AACnC,UAAI,CAACL,MAAL,EACI,MAAMtC,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,QAA7B,CAAN;AACJ,UAAI,CAACa,KAAL,EACI,MAAM1C,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,OAA7B,CAAN;AACJ,UAAI,CAACc,UAAL,EACI,MAAM3C,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,YAA7B,CAAN;AACJ,UAAIjB,GAAG,GAAG,KAAKA,GAAL,CAAS,kBAAT,CAAV;AACA,aAAO,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAE0B,QAAAA,MAAM,EAANA,MAAF;AAAUI,QAAAA,KAAK,EAALA,KAAV;AAAiBC,QAAAA,UAAU,EAAVA;AAAjB,OAArB,CAAP;AACH;;;0BACKC,I,EAAMH,Q,EAAU;AAClB,aAAOjE,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAG/B,OAAOoE,IAAP,IAAe,QAHgB;AAAA;AAAA;AAAA;;AAI/BC,gBAAAA,QAAQ,GAAGD,IAAX;;AAJ+B,oBAK1BC,QAL0B;AAAA;AAAA;AAAA;;AAAA,sBAMrB7C,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,UAA7B,CANqB;;AAAA;AAAA,oBAO1BY,QAP0B;AAAA;AAAA;AAAA;;AAAA,sBAQrBzC,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,UAA7B,CARqB;;AAAA;AAS/BlB,gBAAAA,IAAI,GAAG;AAAEkC,kBAAAA,QAAQ,EAARA,QAAF;AAAYJ,kBAAAA,QAAQ,EAARA;AAAZ,iBAAP;AAT+B;AAAA;;AAAA;AAY/B9B,gBAAAA,IAAI,GAAGiC,IAAP;;AAZ+B;AAc/BhC,gBAAAA,GAd+B,GAczB,KAAKA,GAAL,CAAS,YAAT,CAdyB;AAAA;AAe3B,uBAAM,KAAKO,UAAL,CAAgBP,GAAhB,EAAqBD,IAArB,CAAN;;AAf2B;AAe/BW,gBAAAA,CAf+B;;AAAA,sBAgB/BA,CAAC,IAAI,IAhB0B;AAAA;AAAA;AAAA;;AAAA,sBAiBzBtB,QAAQ,CAACyB,MAAT,CAAgBM,oBAAhB,EAjByB;;AAAA;AAAA,mDAkB5BT,CAlB4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAoBH;AACD;;;;;;;;;;6BAOSgB,M,EAAQG,Q,EAAUC,K,EAAOC,U,EAAYG,I,EAAM;AAChD,aAAOtE,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAC9B8D,MAD8B;AAAA;AAAA;AAAA;;AAAA,sBAEzBtC,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,QAA7B,CAFyB;;AAAA;AAAA,oBAG9BY,QAH8B;AAAA;AAAA;AAAA;;AAAA,sBAIzBzC,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,UAA7B,CAJyB;;AAAA;AAAA,oBAK9Ba,KAL8B;AAAA;AAAA;AAAA;;AAAA,sBAMzB1C,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,OAA7B,CANyB;;AAAA;AAAA,oBAO9Bc,UAP8B;AAAA;AAAA;AAAA;;AAAA,sBAQzB3C,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,YAA7B,CARyB;;AAAA;AAS/BjB,gBAAAA,GAT+B,GASzB,KAAKA,GAAL,CAAS,eAAT,CATyB;AAAA;AAU3B,uBAAM,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAE0B,kBAAAA,MAAM,EAANA,MAAF;AAAUG,kBAAAA,QAAQ,EAARA,QAAV;AAAoBC,kBAAAA,KAAK,EAALA,KAApB;AAA2BC,kBAAAA,UAAU,EAAVA,UAA3B;AAAuCG,kBAAAA,IAAI,EAAJA;AAAvC,iBAArB,CAAN;;AAV2B;AAU/BxB,gBAAAA,CAV+B;;AAAA,sBAW/BA,CAAC,IAAI,IAX0B;AAAA;AAAA;AAAA;;AAAA,sBAYzBtB,QAAQ,CAACyB,MAAT,CAAgBM,oBAAhB,EAZyB;;AAAA;AAAA,mDAa5BT,CAb4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAeH;AACD;;;;;;yBAGK;AACD,aAAO9C,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BoC,gBAAAA,GAD+B,GACzB,KAAKA,GAAL,CAAS,SAAT,CADyB;AAAA;AAExB,uBAAM,KAAKC,SAAL,CAAeD,GAAf,CAAN;;AAFwB;AAE/BP,gBAAAA,IAF+B;AAGnC,uBAAOA,IAAI,CAACoC,QAAZ;AAHmC,mDAI5BpC,IAJ4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAMH;;;;EApKoB6B,a;;IAsKnB9B,U;;;;;AACF,wBAAc;AAAA;;AAAA;;AACV,sFAASF,SAAT;AACA,WAAKO,QAAL,GAAgB;AACZ;;;;AAIAsC,MAAAA,GAAG,EAAE,aAACC,MAAD;AAAA,eAAYxE,SAAS,iCAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,gCAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACxCwE,MADwC;AAAA;AAAA;AAAA;;AAAA,wBAEnChD,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,QAA7B,CAFmC;;AAAA;AAGzCjB,kBAAAA,GAHyC,GAGnC,KAAKA,GAAL,CAAS,kBAAT,CAHmC;AAAA;AAIrC,yBAAM,KAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAEoC,oBAAAA,MAAM,EAANA;AAAF,mBAApB,CAAN;;AAJqC;AAIzC1B,kBAAAA,CAJyC;AAAA,qDAKtCA,CAAC,IAAI,EALiC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAvB,EAArB;AAAA;AALO,KAAhB;AAFU;AAeb;;;;2BACM;AACH,aAAO9C,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BoC,gBAAAA,GAD+B,GACzB,KAAKA,GAAL,CAAS,WAAT,CADyB;AAAA,mDAE5B,KAAKyB,GAAL,CAASzB,GAAT,CAF4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAIH;;;yBACIG,E,EAAI;AACL,UAAIH,GAAG,GAAG,KAAKA,GAAL,CAAS,WAAT,CAAV;AACA,aAAO,KAAKyB,GAAL,CAASzB,GAAT,EAAc;AAAEG,QAAAA,EAAE,EAAFA;AAAF,OAAd,CAAP;AACH;;;wBACGkC,I,EAAMC,I,EAAM;AACZ,UAAItC,GAAG,GAAG,KAAKA,GAAL,CAAS,UAAT,CAAV;AACA,UAAIE,IAAJ;;AACA,UAAI,OAAOmC,IAAP,IAAe,QAAnB,EAA6B;AACzBnC,QAAAA,IAAI,GAAG;AAAEqC,UAAAA,IAAI,EAAEF,IAAR;AAAcG,UAAAA,MAAM,EAAEF;AAAtB,SAAP;AACH,OAFD,MAGK;AACDpC,QAAAA,IAAI,GAAGmC,IAAP;AACH;;AACD,aAAO,KAAK9B,UAAL,CAAgBP,GAAhB,EAAqB;AAAEE,QAAAA,IAAI,EAAJA;AAAF,OAArB,CAAP;AACH;AACD;;;;;;;2BAIOC,E,EAAI;AACP,UAAIH,GAAG,GAAG,KAAKA,GAAL,CAAS,aAAT,CAAV;AACA,aAAO,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAEG,QAAAA,EAAE,EAAFA;AAAF,OAArB,CAAP;AACH;;;2BACMD,I,EAAM;AACT,UAAIF,GAAG,GAAG,KAAKA,GAAL,CAAS,aAAT,CAAV;AACA,aAAO,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAEE,QAAAA,IAAI,EAAJA;AAAF,OAArB,CAAP;AACH;AACD;;;;;;;gCAIYkC,M,EAAQ;AAChB,aAAOxE,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAC9BwE,MAD8B;AAAA;AAAA;AAAA;;AAAA,sBAEzBhD,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,QAA7B,CAFyB;;AAAA;AAG/BjB,gBAAAA,GAH+B,GAGzB,KAAKA,GAAL,CAAS,kBAAT,CAHyB;AAAA;AAI3B,uBAAM,KAAKC,SAAL,CAAeD,GAAf,EAAoB;AAAEoC,kBAAAA,MAAM,EAANA;AAAF,iBAApB,CAAN;;AAJ2B;AAI/B1B,gBAAAA,CAJ+B;AAAA,mDAK5BA,CAAC,IAAI,EALuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AAOH;AACD;;;;;;;;gCAKY0B,M,EAAQK,W,EAAa;AAC7B,UAAI,CAACL,MAAL,EACI,MAAMhD,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,QAA7B,CAAN;AACJ,UAAI,CAACwB,WAAL,EACI,MAAMrD,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,aAA7B,CAAN;AACJ,UAAIjB,GAAG,GAAG,KAAKA,GAAL,CAAS,mBAAT,CAAV;AACA,aAAO,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAEoC,QAAAA,MAAM,EAANA,MAAF;AAAUK,QAAAA,WAAW,EAAXA;AAAV,OAArB,CAAP;AACH;;;;EA3EoBnB,a;;IA6EnB1B,S;;;;;;;;;;;;;;AACF;;;;2CAIuB8B,M,EAAQ;AAC3B,UAAI1B,GAAG,GAAG,KAAKA,GAAL,CAAS,oBAAT,CAAV;AACA,aAAO,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAE0B,QAAAA,MAAM,EAANA,MAAF;AAAUgB,QAAAA,IAAI,EAAE;AAAhB,OAArB,CAAP;AACH;AACD;;;;;;;;oCAKgBZ,K,EAAOC,U,EAAY;AAC/B,aAAOnE,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB;AAAA;AAAA,8BAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAC9BkE,KAD8B;AAAA;AAAA;AAAA;;AAAA,sBAEzB1C,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,OAA7B,CAFyB;;AAAA;AAAA,oBAG9Bc,UAH8B;AAAA;AAAA;AAAA;;AAAA,sBAIzB3C,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,YAA7B,CAJyB;;AAAA;AAK/BjB,gBAAAA,GAL+B,GAKzB,KAAKA,GAAL,CAAS,qBAAT,CALyB;AAAA;AAM3B,uBAAM,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAE8B,kBAAAA,KAAK,EAALA,KAAF;AAASC,kBAAAA,UAAU,EAAVA;AAAT,iBAArB,CAAN;;AAN2B;AAM/BrB,gBAAAA,CAN+B;AAAA,mDAO5BA,CAP4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB,EAAhB;AASH;AACD;;;;;;;wCAIoBgB,M,EAAQ;AACxB,UAAI,CAACA,MAAL,EACI,MAAMtC,QAAQ,CAACyB,MAAT,CAAgBI,YAAhB,CAA6B,QAA7B,CAAN;AACJ,UAAIjB,GAAG,GAAG,KAAKA,GAAL,CAAS,oBAAT,CAAV;AACA,aAAO,KAAKO,UAAL,CAAgBP,GAAhB,EAAqB;AAAE0B,QAAAA,MAAM,EAANA,MAAF;AAAUgB,QAAAA,IAAI,EAAE;AAAhB,OAArB,CAAP;AACH;;;;EAlCmBpB,a","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst service_1 = require(\"./service\");\r\nconst errors_1 = require(\"../errors\");\r\n// import { events } from \"../events\";\r\nclass PermissionService extends service_1.Service {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.role = new RoleModule(this);\r\n        this.user = new UserModule(this);\r\n        this.sms = new SMSModule(this);\r\n        this.resource = {\r\n            list: (args) => {\r\n                let url = this.url(\"resource/list\");\r\n                return this.getByJson(url, { args });\r\n            },\r\n            item: (id) => {\r\n                let url = this.url(\"resource/item\");\r\n                return this.getByJson(url, { id });\r\n            },\r\n            remove: (id) => {\r\n                let url = this.url(\"resource/remove\");\r\n                return this.post(url, { id });\r\n            },\r\n            add: (item) => {\r\n                let url = this.url(\"resource/add\");\r\n                return this.postByJson(url, { item });\r\n            },\r\n            update: (item) => {\r\n                let url = this.url(\"resource/update\");\r\n                return this.postByJson(url, { item });\r\n            }\r\n        };\r\n        this.token = {\r\n            list: (args) => __awaiter(this, void 0, void 0, function* () {\r\n                let url = this.url('token/list');\r\n                let r = this.getByJson(url, { args });\r\n                return r;\r\n            }),\r\n            add: (item) => __awaiter(this, void 0, void 0, function* () {\r\n                let url = this.url(\"token/add\");\r\n                let r = yield this.postByJson(url, { item });\r\n                return r;\r\n            })\r\n        };\r\n    }\r\n    url(path) {\r\n        if (!PermissionService.baseUrl)\r\n            throw errors_1.errors.serviceUrlCanntNull('permissionService');\r\n        if (PermissionService.baseUrl.endsWith(\"/\"))\r\n            return `${PermissionService.baseUrl}${path}`;\r\n        return `${PermissionService.baseUrl}/${path}`;\r\n    }\r\n    /**\r\n     * 移除当前应用的用户\r\n     * @param userId 要移除的用户编号\r\n     */\r\n    removeUser(userId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!userId)\r\n                throw errors_1.errors.argumentNull('userId');\r\n            let url = this.url('application/removeUser');\r\n            return this.deleteByJson(url, { userId });\r\n        });\r\n    }\r\n    /**\r\n     * 获取当前应用的所有用户\r\n     * @param args 数据源选择参数\r\n     */\r\n    getApplicatinUsers(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (args == null)\r\n                throw errors_1.errors.argumentNull('args');\r\n            let url = this.url('application/users');\r\n            let result = yield this.getByJson(url, { args });\r\n            if (result == null)\r\n                throw errors_1.errors.unexpectedNullResult();\r\n            return result;\r\n        });\r\n    }\r\n    /**\r\n     * 获取用角色\r\n     * @param userId 用户编号\r\n     */\r\n    getUserRoles(userId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('role/userRoles');\r\n            let r = yield this.getByJson(url, { userIds: [userId] });\r\n            return r[userId];\r\n        });\r\n    }\r\n}\r\nexports.PermissionService = PermissionService;\r\nclass ServiceModule {\r\n    constructor(service) {\r\n        this.service = service;\r\n        this.getByJson = this.service.getByJson.bind(this.service);\r\n        this.postByJson = this.service.postByJson.bind(this.service);\r\n        this.get = this.service.get.bind(this.service);\r\n        this.post = this.service.post.bind(this.service);\r\n    }\r\n    url(path) {\r\n        if (!PermissionService.baseUrl)\r\n            throw errors_1.errors.serviceUrlCanntNull('permissionService');\r\n        return `${PermissionService.baseUrl}/${path}`;\r\n    }\r\n}\r\nclass UserModule extends ServiceModule {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.role = {\r\n            list: (userId) => __awaiter(this, void 0, void 0, function* () {\r\n                let url = this.url(\"user/role/list\");\r\n                let r = yield this.getByJson(url, { userId });\r\n                return r;\r\n            })\r\n        };\r\n        this.resource = {\r\n            list: (userId) => __awaiter(this, void 0, void 0, function* () {\r\n                let url = this.url(\"user/resource/list\");\r\n                let r = yield this.getByJson(url, { userId });\r\n                return r;\r\n            })\r\n        };\r\n    }\r\n    /** 获取用户列表 */\r\n    list(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('user/list');\r\n            let result = yield this.getByJson(url, { args });\r\n            if (result == null)\r\n                throw errors_1.errors.unexpectedNullResult();\r\n            return result;\r\n        });\r\n    }\r\n    /**\r\n     * 更新用户信息\r\n     * @param item 用户\r\n     */\r\n    update(item) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('user/update');\r\n            let result = yield this.postByJson(url, { user: item });\r\n            return result;\r\n        });\r\n    }\r\n    /**\r\n     * 获取用户\r\n     * @param userId 用户编号\r\n     */\r\n    item(userId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('user/item');\r\n            let user = yield this.getByJson(url, { userId });\r\n            return user;\r\n        });\r\n    }\r\n    /**\r\n     * 添加用户信息\r\n     * @param item 用户\r\n     */\r\n    add(item) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('user/add');\r\n            let result;\r\n            let r = yield this.postByJson(url, { item });\r\n            return r;\r\n        });\r\n    }\r\n    /** 通过手机获取用户 */\r\n    listByMobile(mobile) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!mobile)\r\n                throw errors_1.errors.argumentNull('mobile');\r\n            let args = {};\r\n            args.filter = `mobile = '${mobile}'`;\r\n            let r = yield this.list(args);\r\n            return r.dataItems[0];\r\n        });\r\n    }\r\n    /**\r\n     * 重置密码\r\n     * @param mobile 手机号\r\n     * @param password 新密码\r\n     * @param smsId 短信编号\r\n     * @param verifyCode 验证码\r\n     */\r\n    resetPassword(mobile, password, smsId, verifyCode) {\r\n        if (!mobile)\r\n            throw errors_1.errors.argumentNull('mobile');\r\n        if (!password)\r\n            throw errors_1.errors.argumentNull('password');\r\n        if (!smsId)\r\n            throw errors_1.errors.argumentNull('smsId');\r\n        if (!verifyCode)\r\n            throw errors_1.errors.argumentNull('verifyCode');\r\n        let url = this.url('user/resetPassword');\r\n        return this.postByJson(url, { mobile, password, smsId, verifyCode });\r\n    }\r\n    /**\r\n     * 重置手机号码\r\n     * @param mobile 需要重置的新手机号\r\n     * @param smsId 短信编号\r\n     * @param verifyCode 验证码\r\n     */\r\n    resetMobile(mobile, smsId, verifyCode) {\r\n        if (!mobile)\r\n            throw errors_1.errors.argumentNull('mobile');\r\n        if (!smsId)\r\n            throw errors_1.errors.argumentNull('smsId');\r\n        if (!verifyCode)\r\n            throw errors_1.errors.argumentNull('verifyCode');\r\n        let url = this.url('user/resetMobile');\r\n        return this.postByJson(url, { mobile, smsId, verifyCode });\r\n    }\r\n    login(arg0, password) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let args;\r\n            let username;\r\n            if (typeof arg0 == \"string\") {\r\n                username = arg0;\r\n                if (!username)\r\n                    throw errors_1.errors.argumentNull('username');\r\n                if (!password)\r\n                    throw errors_1.errors.argumentNull('password');\r\n                args = { username, password };\r\n            }\r\n            else {\r\n                args = arg0;\r\n            }\r\n            let url = this.url('user/login');\r\n            let r = yield this.postByJson(url, args);\r\n            if (r == null)\r\n                throw errors_1.errors.unexpectedNullResult();\r\n            return r;\r\n        });\r\n    }\r\n    /**\r\n     * 注册\r\n     * @param mobile 手机号\r\n     * @param password 密码\r\n     * @param smsId 短信编号\r\n     * @param verifyCode 验证码\r\n     */\r\n    register(mobile, password, smsId, verifyCode, data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!mobile)\r\n                throw errors_1.errors.argumentNull('mobile');\r\n            if (!password)\r\n                throw errors_1.errors.argumentNull('password');\r\n            if (!smsId)\r\n                throw errors_1.errors.argumentNull('smsId');\r\n            if (!verifyCode)\r\n                throw errors_1.errors.argumentNull('verifyCode');\r\n            let url = this.url('user/register');\r\n            let r = yield this.postByJson(url, { mobile, password, smsId, verifyCode, data });\r\n            if (r == null)\r\n                throw errors_1.errors.unexpectedNullResult();\r\n            return r;\r\n        });\r\n    }\r\n    /**\r\n     * 获取用户个人信息\r\n     */\r\n    me() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('user/me');\r\n            let user = yield this.getByJson(url);\r\n            delete user.password;\r\n            return user;\r\n        });\r\n    }\r\n}\r\nclass RoleModule extends ServiceModule {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.resource = {\r\n            /**\r\n             * 获取角色所允许访问的资源 id\r\n             * @param roleId 指定的角色编号\r\n             */\r\n            ids: (roleId) => __awaiter(this, void 0, void 0, function* () {\r\n                if (!roleId)\r\n                    throw errors_1.errors.argumentNull('roleId');\r\n                let url = this.url('role/resourceIds');\r\n                let r = yield this.getByJson(url, { roleId });\r\n                return r || [];\r\n            })\r\n        };\r\n    }\r\n    list() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url(\"role/list\");\r\n            return this.get(url);\r\n        });\r\n    }\r\n    item(id) {\r\n        let url = this.url(\"role/item\");\r\n        return this.get(url, { id });\r\n    }\r\n    add(arg1, arg2) {\r\n        let url = this.url(\"role/add\");\r\n        let item;\r\n        if (typeof arg1 == \"string\") {\r\n            item = { name: arg1, remark: arg2 };\r\n        }\r\n        else {\r\n            item = arg1;\r\n        }\r\n        return this.postByJson(url, { item });\r\n    }\r\n    /**\r\n     * 删除角色\r\n     * @param id 要删除的角色编号\r\n     */\r\n    remove(id) {\r\n        let url = this.url(\"role/remove\");\r\n        return this.postByJson(url, { id });\r\n    }\r\n    update(item) {\r\n        let url = this.url(\"role/update\");\r\n        return this.postByJson(url, { item });\r\n    }\r\n    /**\r\n     * 获取角色所允许访问的资源 id\r\n     * @param roleId 指定的角色编号\r\n     */\r\n    resourceIds(roleId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!roleId)\r\n                throw errors_1.errors.argumentNull('roleId');\r\n            let url = this.url('role/resourceIds');\r\n            let r = yield this.getByJson(url, { roleId });\r\n            return r || [];\r\n        });\r\n    }\r\n    /**\r\n     *\r\n     * @param roleId 指定的角色编号\r\n     * @param resourceIds 角色所允许访问的资源编号\r\n     */\r\n    setResource(roleId, resourceIds) {\r\n        if (!roleId)\r\n            throw errors_1.errors.argumentNull('roleId');\r\n        if (!resourceIds)\r\n            throw errors_1.errors.argumentNull('resourceIds');\r\n        let url = this.url('role/setResources');\r\n        return this.postByJson(url, { roleId, resourceIds });\r\n    }\r\n}\r\nclass SMSModule extends ServiceModule {\r\n    /**\r\n     * 发送注册操作验证码\r\n     * @param mobile 接收验证码的手机号\r\n     */\r\n    sendRegisterVerifyCode(mobile) {\r\n        let url = this.url('sms/sendVerifyCode');\r\n        return this.postByJson(url, { mobile, type: 'register' });\r\n    }\r\n    /**\r\n     * 校验验证码\r\n     * @param smsId 验证码信息的 ID 号\r\n     * @param verifyCode 验证码\r\n     */\r\n    checkVerifyCode(smsId, verifyCode) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!smsId)\r\n                throw errors_1.errors.argumentNull('smsId');\r\n            if (!verifyCode)\r\n                throw errors_1.errors.argumentNull('verifycode');\r\n            let url = this.url('sms/checkVerifyCode');\r\n            let r = yield this.postByJson(url, { smsId, verifyCode });\r\n            return r;\r\n        });\r\n    }\r\n    /**\r\n     * 发送重置密码操作验证码\r\n     * @param mobile 接收验证码的手机号\r\n     */\r\n    sendResetVerifyCode(mobile) {\r\n        if (!mobile)\r\n            throw errors_1.errors.argumentNull('mobile');\r\n        let url = this.url('sms/sendVerifyCode');\r\n        return this.postByJson(url, { mobile, type: 'resetPassword' });\r\n    }\r\n}\r\n"],"file":"permission-service.js"}