{"version":3,"sources":["../../out/services/permission-service.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","service_1","require","errors_1","PermissionService","currentUser","resource","list","url","get","role","item","id","add","postByJson","remove","update","ids","roleId","errors","argumentNull","getByJson","r","args","post","user","unexpectedNullResult","token","path","baseUrl","serviceUrlCanntNull","resourceIds","userId","roleIds","name","remark","mobile","filter","getUserList","dataItems","deleteByJson","type","smsId","verifyCode","password","arg0","username","data","roles","userIds","Service"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst service_1 = require(\"./service\");\r\nconst errors_1 = require(\"../errors\");\r\n// import { events } from \"../events\";\r\nclass PermissionService extends service_1.Service {\r\n    constructor() {\r\n        super();\r\n        this.currentUser = {\r\n            resource: {\r\n                list: () => {\r\n                    let url = this.url(\"current-user/resource/list\");\r\n                    return this.get(url);\r\n                }\r\n            }\r\n        };\r\n        this.role = {\r\n            list: () => {\r\n                let url = this.url(\"role/list\");\r\n                return this.get(url);\r\n            },\r\n            item: (id) => {\r\n                let url = this.url(\"role/item\");\r\n                return this.get(url, { id });\r\n            },\r\n            add: (item) => {\r\n                let url = this.url(\"role/add\");\r\n                return this.postByJson(url, { item });\r\n            },\r\n            remove: (id) => {\r\n                let url = this.url(\"role/remove\");\r\n                return this.postByJson(url, { id });\r\n            },\r\n            update: (item) => {\r\n                let url = this.url(\"role/update\");\r\n                return this.postByJson(url, { item });\r\n            },\r\n            resource: {\r\n                /**\r\n                 * 获取角色所允许访问的资源 id\r\n                 * @param roleId 指定的角色编号\r\n                 */\r\n                ids: (roleId) => __awaiter(this, void 0, void 0, function* () {\r\n                    if (!roleId)\r\n                        throw errors_1.errors.argumentNull('roleId');\r\n                    let url = this.url('role/resourceIds');\r\n                    let r = yield this.getByJson(url, { roleId });\r\n                    return r || [];\r\n                })\r\n            }\r\n        };\r\n        this.resource = {\r\n            list: (args) => {\r\n                let url = this.url(\"resource/list\");\r\n                return this.getByJson(url, { args });\r\n            },\r\n            item: (id) => {\r\n                let url = this.url(\"resource/item\");\r\n                return this.getByJson(url, { id });\r\n            },\r\n            remove: (id) => {\r\n                let url = this.url(\"resource/remove\");\r\n                return this.post(url, { id });\r\n            },\r\n            add: (item) => {\r\n                let url = this.url(\"resource/add\");\r\n                return this.postByJson(url, { item });\r\n            },\r\n            update: (item) => {\r\n                let url = this.url(\"resource/update\");\r\n                return this.postByJson(url, { item });\r\n            }\r\n        };\r\n        this.user = {\r\n            list: (args) => __awaiter(this, void 0, void 0, function* () {\r\n                let url = this.url('user/list');\r\n                let result = yield this.getByJson(url, { args });\r\n                if (result == null)\r\n                    throw errors_1.errors.unexpectedNullResult();\r\n                return result;\r\n            }),\r\n            update: (item) => __awaiter(this, void 0, void 0, function* () {\r\n                let url = this.url('user/update');\r\n                let result = yield this.postByJson(url, { user: item });\r\n                return result;\r\n            })\r\n        };\r\n        this.token = {\r\n            list: (args) => __awaiter(this, void 0, void 0, function* () {\r\n                let url = this.url('token/list');\r\n                let r = this.getByJson(url, { args });\r\n                return r;\r\n            }),\r\n            add: (item) => __awaiter(this, void 0, void 0, function* () {\r\n                let url = this.url(\"token/add\");\r\n                let r = yield this.postByJson(url, { item });\r\n                return r;\r\n            })\r\n        };\r\n    }\r\n    url(path) {\r\n        if (!PermissionService.baseUrl)\r\n            throw errors_1.errors.serviceUrlCanntNull('permissionService');\r\n        return `${PermissionService.baseUrl}/${path}`;\r\n    }\r\n    // //=============================================================\r\n    // // 资源相关\r\n    // /** 添加资源 */\r\n    // async addResource(item: Partial<Resource>) {\r\n    //     if (!item) throw errors.argumentNull('item')\r\n    //     let url = this.url('resource/add')\r\n    //     let result = await this.postByJson<{ id: string }>(url, { item })\r\n    //     Object.assign(item, result)\r\n    //     return result\r\n    // }\r\n    // /** 更新资源 */\r\n    // async updateResource(item: Partial<Resource>) {\r\n    //     if (!item) throw errors.argumentNull('item')\r\n    //     let url = this.url('resource/update')\r\n    //     let result = await this.postByJson(url, { item })\r\n    //     Object.assign(item, result)\r\n    //     return result\r\n    // }\r\n    // /** 获取资源列表 */\r\n    // async getResourceList(args: DataSourceSelectArguments): Promise<DataSourceSelectResult<Resource>> {\r\n    //     if (!args) throw errors.argumentNull('args')\r\n    //     let url = this.url('resource/list')\r\n    //     if (!args.sortExpression)\r\n    //         args.sortExpression = 'sort_number asc'\r\n    //     type T = Resource & { data?: { visible?: boolean } }\r\n    //     let result = await this.getByJson<DataSourceSelectResult<T>>(url, { args })\r\n    //     if (result == null)\r\n    //         throw errors.unexpectedNullResult()\r\n    //     for (let i = 0; i < result.dataItems.length; i++) {\r\n    //         result.dataItems[i].data = result.dataItems[i].data || {}\r\n    //     }\r\n    //     return result\r\n    // }\r\n    // /**\r\n    //  * 删除指定的资源\r\n    //  * @param id 要删除的资源编号\r\n    //  */\r\n    // async deleteResource(id: string) {\r\n    //     if (!id) throw errors.argumentNull('id')\r\n    //     let url = this.url('resource/remove')\r\n    //     return this.postByJson(url, { id })\r\n    // }\r\n    // /**\r\n    //  * 获取指定资源的子按钮\r\n    //  * @param id 资源编号\r\n    //  */\r\n    // async getResourceChildCommands(id: string) {\r\n    //     if (!id) throw errors.argumentNull('id')\r\n    //     let buttonType: ResourceType = 'button'\r\n    //     let filter = `parent_id = '${id}' and type = '${buttonType}'`\r\n    //     let url = `resource/list`\r\n    //     let result = await this.getByJson(url, { filter })\r\n    //     return result\r\n    // }\r\n    //=============================================================\r\n    // 角色相关\r\n    /**\r\n     * 获取角色列表\r\n     */\r\n    getRoles() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('role/list');\r\n            let r = yield this.getByJson(url);\r\n            return r || [];\r\n        });\r\n    }\r\n    /**\r\n     * 获取单个角色\r\n     * @param id 要获取的角色编号\r\n     */\r\n    getRole(id) {\r\n        if (!id)\r\n            throw errors_1.errors.argumentNull('id');\r\n        let url = this.url('role/get');\r\n        return this.getByJson(url, { id });\r\n    }\r\n    /**\r\n     *\r\n     * @param roleId 指定的角色编号\r\n     * @param resourceIds 角色所允许访问的资源编号\r\n     */\r\n    setRoleResource(roleId, resourceIds) {\r\n        if (!roleId)\r\n            throw errors_1.errors.argumentNull('roleId');\r\n        if (!resourceIds)\r\n            throw errors_1.errors.argumentNull('resourceIds');\r\n        let url = this.url('role/setResources');\r\n        return this.postByJson(url, { roleId, resourceIds });\r\n    }\r\n    /**\r\n     * 获取角色所允许访问的资源 id\r\n     * @param roleId 指定的角色编号\r\n     */\r\n    getRoleResourceIds(roleId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!roleId)\r\n                throw errors_1.errors.argumentNull('roleId');\r\n            let url = this.url('role/resourceIds');\r\n            let r = yield this.getByJson(url, { roleId });\r\n            return r || [];\r\n        });\r\n    }\r\n    /** 设置用户角色 */\r\n    setUserRoles(userId, roleIds) {\r\n        if (!userId)\r\n            throw errors_1.errors.argumentNull('userId');\r\n        if (!roleIds)\r\n            throw errors_1.errors.argumentNull('roleIds');\r\n        let url = this.url('user/setRoles');\r\n        return this.postByJson(url, { userId, roleIds });\r\n    }\r\n    /**\r\n     * 添加角色\r\n     * @param name 要添加的角色名称\r\n     * @param remark 要添加的角色备注\r\n     */\r\n    addRole(name, remark) {\r\n        if (!name)\r\n            throw errors_1.errors.argumentNull(\"name\");\r\n        let url = this.url(\"role/add\");\r\n        return this.postByJson(url, { name, remark });\r\n    }\r\n    /**\r\n     * 删除角色\r\n     * @param id 要删除的角色编号\r\n     */\r\n    removeRole(id) {\r\n        if (!id)\r\n            throw errors_1.errors.argumentNull(\"id\");\r\n        let url = this.url(\"role/remove\");\r\n        return this.postByJson(url, { id });\r\n    }\r\n    //================================================================\r\n    // 用户相关\r\n    /** 获取用户列表 */\r\n    getUserList(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('user/list');\r\n            let result = yield this.getByJson(url, { args });\r\n            if (result == null)\r\n                throw errors_1.errors.unexpectedNullResult();\r\n            return result;\r\n        });\r\n    }\r\n    /** 通过手机获取用户 */\r\n    getUserByMobile(mobile) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!mobile)\r\n                throw errors_1.errors.argumentNull('mobile');\r\n            let args = {};\r\n            args.filter = `mobile = '${mobile}'`;\r\n            let r = yield this.getUserList(args);\r\n            return r.dataItems[0];\r\n        });\r\n    }\r\n    /**\r\n     * 移除当前应用的用户\r\n     * @param userId 要移除的用户编号\r\n     */\r\n    removeUser(userId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!userId)\r\n                throw errors_1.errors.argumentNull('userId');\r\n            let url = this.url('application/removeUser');\r\n            return this.deleteByJson(url, { userId });\r\n        });\r\n    }\r\n    /**\r\n     * 获取当前应用的所有用户\r\n     * @param args 数据源选择参数\r\n     */\r\n    getApplicatinUsers(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (args == null)\r\n                throw errors_1.errors.argumentNull('args');\r\n            let url = this.url('application/users');\r\n            let result = yield this.getByJson(url, { args });\r\n            if (result == null)\r\n                throw errors_1.errors.unexpectedNullResult();\r\n            return result;\r\n        });\r\n    }\r\n    /**\r\n     * 发送注册操作验证码\r\n     * @param mobile 接收验证码的手机号\r\n     */\r\n    sendRegisterVerifyCode(mobile) {\r\n        let url = this.url('sms/sendVerifyCode');\r\n        return this.postByJson(url, { mobile, type: 'register' });\r\n    }\r\n    /**\r\n     * 校验验证码\r\n     * @param smsId 验证码信息的 ID 号\r\n     * @param verifyCode 验证码\r\n     */\r\n    checkVerifyCode(smsId, verifyCode) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!smsId)\r\n                throw errors_1.errors.argumentNull('smsId');\r\n            if (!verifyCode)\r\n                throw errors_1.errors.argumentNull('verifycode');\r\n            let url = this.url('sms/checkVerifyCode');\r\n            let r = yield this.postByJson(url, { smsId, verifyCode });\r\n            return r;\r\n        });\r\n    }\r\n    /**\r\n     * 发送重置密码操作验证码\r\n     * @param mobile 接收验证码的手机号\r\n     */\r\n    sendResetVerifyCode(mobile) {\r\n        if (!mobile)\r\n            throw errors_1.errors.argumentNull('mobile');\r\n        let url = this.url('sms/sendVerifyCode');\r\n        return this.postByJson(url, { mobile, type: 'resetPassword' });\r\n    }\r\n    /**\r\n     * 重置密码\r\n     * @param mobile 手机号\r\n     * @param password 新密码\r\n     * @param smsId 短信编号\r\n     * @param verifyCode 验证码\r\n     */\r\n    resetPassword(mobile, password, smsId, verifyCode) {\r\n        if (!mobile)\r\n            throw errors_1.errors.argumentNull('mobile');\r\n        if (!password)\r\n            throw errors_1.errors.argumentNull('password');\r\n        if (!smsId)\r\n            throw errors_1.errors.argumentNull('smsId');\r\n        if (!verifyCode)\r\n            throw errors_1.errors.argumentNull('verifyCode');\r\n        let url = this.url('user/resetPassword');\r\n        return this.postByJson(url, { mobile, password, smsId, verifyCode });\r\n    }\r\n    /**\r\n     * 重置手机号码\r\n     * @param mobile 需要重置的新手机号\r\n     * @param smsId 短信编号\r\n     * @param verifyCode 验证码\r\n     */\r\n    resetMobile(mobile, smsId, verifyCode) {\r\n        if (!mobile)\r\n            throw errors_1.errors.argumentNull('mobile');\r\n        if (!smsId)\r\n            throw errors_1.errors.argumentNull('smsId');\r\n        if (!verifyCode)\r\n            throw errors_1.errors.argumentNull('verifyCode');\r\n        let url = this.url('user/resetMobile');\r\n        return this.postByJson(url, { mobile, smsId, verifyCode });\r\n    }\r\n    /**\r\n     * 退出登录\r\n     */\r\n    logout() {\r\n        // if (Service.loginInfo.value == null)\r\n        //     return\r\n        //TODO: 将服务端 token 设置为失效\r\n        // events.logout.fire(this, Service.loginInfo.value)\r\n        // Service.setStorageLoginInfo(null)\r\n        // Service.loginInfo.value = null\r\n    }\r\n    login(arg0, password) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let args;\r\n            let username;\r\n            if (typeof arg0 == \"string\") {\r\n                username = arg0;\r\n                if (!username)\r\n                    throw errors_1.errors.argumentNull('username');\r\n                if (!password)\r\n                    throw errors_1.errors.argumentNull('password');\r\n                args = { username, password };\r\n            }\r\n            else {\r\n                args = arg0;\r\n            }\r\n            let url = this.url('user/login');\r\n            let r = yield this.postByJson(url, args);\r\n            if (r == null)\r\n                throw errors_1.errors.unexpectedNullResult();\r\n            // Service.loginInfo.value = r\r\n            // Service.setStorageLoginInfo(r)\r\n            // events.login.fire(this, r)\r\n            return r;\r\n        });\r\n    }\r\n    /**\r\n     * 注册\r\n     * @param mobile 手机号\r\n     * @param password 密码\r\n     * @param smsId 短信编号\r\n     * @param verifyCode 验证码\r\n     */\r\n    register(mobile, password, smsId, verifyCode, data) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!mobile)\r\n                throw errors_1.errors.argumentNull('mobile');\r\n            if (!password)\r\n                throw errors_1.errors.argumentNull('password');\r\n            if (!smsId)\r\n                throw errors_1.errors.argumentNull('smsId');\r\n            if (!verifyCode)\r\n                throw errors_1.errors.argumentNull('verifyCode');\r\n            let url = this.url('user/register');\r\n            let r = yield this.postByJson(url, { mobile, password, smsId, verifyCode, data });\r\n            if (r == null)\r\n                throw errors_1.errors.unexpectedNullResult();\r\n            // Service.setStorageLoginInfo(r)\r\n            // events.register.fire(this, r)\r\n            return r;\r\n        });\r\n    }\r\n    /**\r\n     * 获取用户个人信息\r\n     */\r\n    me() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // if (!Service.loginInfo.value) {\r\n            //     return null\r\n            // }\r\n            let url = this.url('user/me');\r\n            let user = yield this.getByJson(url);\r\n            return user;\r\n        });\r\n    }\r\n    /**\r\n     * 获取用户\r\n     * @param userId 用户编号\r\n     */\r\n    getUser(userId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('user/item');\r\n            let user = yield this.getByJson(url, { userId });\r\n            return user;\r\n        });\r\n    }\r\n    /**\r\n     * 添加用户信息\r\n     * @param item 用户\r\n     */\r\n    addUser(item) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('user/add');\r\n            let result;\r\n            let r = yield this.postByJson(url, { item });\r\n            return r;\r\n        });\r\n    }\r\n    /**\r\n     * 更新用户信息\r\n     * @param item 用户\r\n     */\r\n    updateUser(item) {\r\n        let url = this.url('user/update');\r\n        return this.postByJson(url, { user: item });\r\n    }\r\n    /**\r\n     * 获取当前登录用户的角色\r\n     */\r\n    myRoles() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('user/getRoles');\r\n            let roles = yield this.getByJson(url);\r\n            return roles;\r\n        });\r\n    }\r\n    /**\r\n     * 给指定的用户添加角色\r\n     * @param userId 用户编号\r\n     * @param roleIds 多个角色编号\r\n     */\r\n    addUserRoles(userId, roleIds) {\r\n        let url = this.url('user/addRoles');\r\n        return this.postByJson(url, { userId, roleIds });\r\n    }\r\n    /**\r\n     * 获取用角色\r\n     * @param userId 用户编号\r\n     */\r\n    getUserRoles(userId) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let url = this.url('role/userRoles');\r\n            let r = yield this.getByJson(url, { userIds: [userId] });\r\n            return r[userId];\r\n        });\r\n    }\r\n}\r\nexports.PermissionService = PermissionService;\r\n"],"file":"permission-service.js"}