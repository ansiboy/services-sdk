{"version":3,"sources":["../../out/services/service.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","maishu_chitu_service_1","require","Service","url","options","_super","create","ajax","get","headers","loginInfo","token","applicationId","call","data","obj","code","message","Error","d","keys","i","length","key","k","toLowerCase","substr","travelJSON","isDateString","Date","stack","Array","push","item","pop","text","datePattern","datePattern1","match","getOwnPropertyNames","encodeURIComponent","JSON","stringify","method","params","isEncoded","uri","decodeURIComponent","loginInfoSerialString","getCookie","LoginInfoStorageName","parse","console","error","log","removeCookie","setCookie","name","days","expires","date","setTime","getTime","toUTCString","document","cookie","nameEQ","ca","split","c","charAt","substring","indexOf","ValueStore","getStorageLoginInfo"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst maishu_chitu_service_1 = require(\"maishu-chitu-service\");\r\nclass Service extends maishu_chitu_service_1.Service {\r\n    constructor() {\r\n        super();\r\n    }\r\n    static getStorageLoginInfo() {\r\n        let loginInfoSerialString = this.getCookie(Service.LoginInfoStorageName);\r\n        if (!loginInfoSerialString)\r\n            return null;\r\n        try {\r\n            let loginInfo = JSON.parse(loginInfoSerialString);\r\n            return loginInfo;\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            console.log(loginInfoSerialString);\r\n            return null;\r\n        }\r\n    }\r\n    static setStorageLoginInfo(value) {\r\n        if (value == null) {\r\n            this.removeCookie(Service.LoginInfoStorageName);\r\n            return;\r\n        }\r\n        this.setCookie(Service.LoginInfoStorageName, JSON.stringify(value), 1000);\r\n    }\r\n    static setCookie(name, value, days) {\r\n        var expires = \"\";\r\n        if (days) {\r\n            var date = new Date();\r\n            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n            expires = \"; expires=\" + date.toUTCString();\r\n        }\r\n        document.cookie = name + \"=\" + (value || \"\") + expires + \"; path=/\";\r\n    }\r\n    static getCookie(name) {\r\n        var nameEQ = name + \"=\";\r\n        var ca = document.cookie.split(';');\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n            while (c.charAt(0) == ' ')\r\n                c = c.substring(1, c.length);\r\n            if (c.indexOf(nameEQ) == 0)\r\n                return c.substring(nameEQ.length, c.length);\r\n        }\r\n        return null;\r\n    }\r\n    static removeCookie(name) {\r\n        // document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n        this.setCookie(name, '');\r\n    }\r\n    ajax(url, options) {\r\n        const _super = Object.create(null, {\r\n            ajax: { get: () => super.ajax }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            options = options || {};\r\n            options.headers = options.headers || {};\r\n            if (Service.loginInfo.value)\r\n                options.headers['token'] = Service.loginInfo.value.token;\r\n            if (Service.applicationId)\r\n                options.headers['application-id'] = typeof Service.applicationId == 'function' ? Service.applicationId() : Service.applicationId;\r\n            let data = yield _super.ajax.call(this, url, options);\r\n            if (data == null) {\r\n                return null;\r\n            }\r\n            let obj = data;\r\n            if (obj.code && obj.message) {\r\n                throw new Error(obj.message);\r\n            }\r\n            if (obj != null && obj['DataItems'] != null && obj['TotalRowCount'] != null) {\r\n                let d = {};\r\n                let keys = Object.keys(data);\r\n                for (let i = 0; i < keys.length; i++) {\r\n                    let key = keys[i];\r\n                    let k = key[0].toLowerCase() + key.substr(1);\r\n                    d[k] = obj[key];\r\n                }\r\n                data = d;\r\n            }\r\n            this.travelJSON(data);\r\n            return data;\r\n        });\r\n    }\r\n    /**\r\n     * 遍历 JSON 对象各个字段，将日期字符串转换为 Date 对象\r\n     * @param obj 要转换的 JSON 对象\r\n     */\r\n    travelJSON(obj) {\r\n        if (typeof obj === 'string' && this.isDateString(obj)) {\r\n            return new Date(obj);\r\n        }\r\n        else if (typeof obj === 'string') {\r\n            return obj;\r\n        }\r\n        var stack = new Array();\r\n        stack.push(obj);\r\n        while (stack.length > 0) {\r\n            var item = stack.pop();\r\n            for (var key in item) {\r\n                var value = item[key];\r\n                if (value == null)\r\n                    continue;\r\n                if (value instanceof Array) {\r\n                    for (var i = 0; i < value.length; i++) {\r\n                        stack.push(value[i]);\r\n                    }\r\n                    continue;\r\n                }\r\n                if (typeof value == 'object') {\r\n                    stack.push(value);\r\n                    continue;\r\n                }\r\n                if (typeof value == 'string' && this.isDateString(value)) {\r\n                    item[key] = new Date(value);\r\n                }\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    isDateString(text) {\r\n        const datePattern = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/;\r\n        const datePattern1 = /\\d{4}-\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}/;\r\n        return text.match(datePattern) != null || text.match(datePattern1) != null;\r\n    }\r\n    getByJson(url, data) {\r\n        if (data && Object.getOwnPropertyNames(data).length > 0) {\r\n            url = `${url}?${encodeURIComponent(JSON.stringify(data))}`;\r\n        }\r\n        let headers = { \"content-type\": 'application/json' };\r\n        return this.ajax(url, { headers, method: 'get' });\r\n    }\r\n    putByJson(url, data) {\r\n        let headers = { \"content-type\": 'application/json' };\r\n        return this.ajax(url, { headers, data, method: 'put' });\r\n    }\r\n    postByJson(url, data) {\r\n        let headers = { \"content-type\": 'application/json' };\r\n        return this.ajax(url, { headers, data, method: 'post' });\r\n    }\r\n    deleteByJson(url, data) {\r\n        let headers = { \"content-type\": 'application/json' };\r\n        return this.ajax(url, { headers, data, method: 'delete' });\r\n    }\r\n    get(url, data) {\r\n        data = data || {};\r\n        let params = \"\";\r\n        for (let key in data) {\r\n            if (data[key] == null)\r\n                continue;\r\n            let value = `${data[key]}`;\r\n            if (!this.isEncoded(value)) {\r\n                value = encodeURIComponent(value);\r\n            }\r\n            params = params ? `${params}&${key}=${value}` : `${key}=${value}`;\r\n        }\r\n        if (params) {\r\n            url = `${url}?${params}`;\r\n        }\r\n        return this.ajax(url, { method: 'get' });\r\n    }\r\n    isEncoded(uri) {\r\n        try {\r\n            uri = uri || '';\r\n            return uri !== decodeURIComponent(uri);\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    put(url, data) {\r\n        let headers = { \"content-type\": 'application/x-www-form-urlencoded' };\r\n        return this.ajax(url, { headers, data, method: 'put' });\r\n    }\r\n    post(url, data) {\r\n        let headers = { \"content-type\": 'application/x-www-form-urlencoded' };\r\n        return this.ajax(url, { headers, data, method: 'post', });\r\n    }\r\n    delete(url, data) {\r\n        let headers = { \"content-type\": 'application/x-www-form-urlencoded' };\r\n        return this.ajax(url, { headers, data, method: 'delete' });\r\n    }\r\n}\r\nService.LoginInfoStorageName = 'app-login-info';\r\nService.loginInfo = new maishu_chitu_service_1.ValueStore(Service.getStorageLoginInfo());\r\nexports.Service = Service;\r\n"],"file":"service.js"}